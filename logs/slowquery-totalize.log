
# 3s user time, 10ms system time, 30.77M rss, 38.88M vsz
# Current date: Thu Jun  9 12:22:43 2022
# Hostname: ip-10-0-0-56
# Files: /home/isucon/webapp/mysql/logs/mysql-slow.log
# Overall: 51.67k total, 38 unique, 580.60 QPS, 5.65x concurrency ________
# Time range: 2022-06-09T12:21:10 to 2022-06-09T12:22:39
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           503s     1us      8s    10ms   541us   248ms   119us
# Lock time           79ms       0     1ms     1us     1us    11us     1us
# Rows sent        384.39k       0 252.75k    7.62    0.99   1.08k    0.99
# Rows examine      48.45M       0  19.76M  983.17   69.19  89.47k    0.99
# Query size         4.64M       6   4.06k   94.10  143.84   99.96   69.19

# Profile
# Rank Query ID                      Response time  Calls R/Call V/M   Ite
# ==== ============================= ============== ===== ====== ===== ===
#    1 0x3B4267C2E0B52599C84C7795... 479.5096 95.3%    90 5.3279  1.44 SELECT playlist user
# MISC 0xMISC                         23.7558  4.7% 51583 0.0005   0.0 <37 ITEMS>

# Query 1: 1.25 QPS, 6.66x concurrency, ID 0x3B4267C2E0B52599C84C77950B3BD9BF at byte 13770204
# This item is included in the report because it matches --limit.
# Scores: V/M = 1.44
# Time range: 2022-06-09T12:21:27 to 2022-06-09T12:22:39
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0      90
# Exec time     95    480s     1ms      8s      5s      8s      3s      6s
# Lock time      0   144us     1us    15us     1us     1us     1us     1us
# Rows sent      2   8.79k     100     100     100     100       0     100
# Rows examine  41  20.01M     212 269.57k 227.66k 257.47k  93.25k 257.47k
# Query size     0  32.70k     372     372     372     372       0     372
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ###########
#  10ms
# 100ms
#    1s  ################################################################
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist`\G
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'user'\G
#    SHOW CREATE TABLE `isucon_listen80`.`user`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT p.*, u.account AS 'user.account', u.display_name AS 'user.display_name', u.password_hash AS 'user.password_hash', u.is_ban AS 'user.is_ban', u.created_at AS 'user.created_at', u.last_logined_at AS 'user.last_logined_at' FROM playlist as p INNER JOIN user as u on p.user_account = u.account where p.is_public = 1 and u.is_ban = 0 ORDER BY p.created_at DESC LIMIT 100\G
