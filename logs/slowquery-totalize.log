
# 11.5s user time, 20ms system time, 31.14M rss, 39.16M vsz
# Current date: Mon Jun  6 11:58:05 2022
# Hostname: ip-10-0-0-56
# Files: /home/isucon/webapp/mysql/logs/mysql-slow.log
# Overall: 200.66k total, 40 unique, 3.34k QPS, 1.91x concurrency ________
# Time range: 2022-06-06T11:56:50 to 2022-06-06T11:57:50
# Attribute          total     min     max     avg     95%  stddev  median
# ============     ======= ======= ======= ======= ======= ======= =======
# Exec time           114s     1us      7s   569us     2ms    18ms   125us
# Lock time             3s       0   474ms    17us     1us     2ms     1us
# Rows sent        717.77k       0 252.75k    3.66    0.99  560.62    0.99
# Rows examine      51.75M       0  19.76M  270.45   76.28  45.14k    4.96
# Query size        18.88M       6   1.64k   98.67  284.79   70.94   69.19

# Profile
# Rank Query ID                      Response time Calls R/Call V/M   Item
# ==== ============================= ============= ===== ====== ===== ====
#    1 0xEC063962A0903583D4BF22B4... 27.0996 23.7% 51976 0.0005  0.01 SELECT playlist_favorite
#    2 0x8AFB70E4EF33ECB862815558... 14.4608 12.6% 46497 0.0003  0.00 SELECT playlist_song
#    3 0x3B7F9C3BFD4303564EFFC05B... 14.0438 12.3%  1997 0.0070  0.00 INSERT playlist_favorite
#    4 0x0C7853719E9897E59B57F2AB...  7.4421  6.5%  5482 0.0014  0.01 SELECT playlist_song song artist
#    5 0xBB803527F0B05ED37FAF2BBD...  7.3216  6.4%     1 7.3216  0.00 DELETE SELECT playlist_song playlist
#    6 0xD3D79AC2E339745D16FD77E1...  7.1230  6.2% 31182 0.0002  0.00 SELECT playlist_favorite
#    7 0x40BA718A3112C61FB0C21793...  6.1416  5.4% 14036 0.0004  0.00 SELECT playlist user playlist_song
#    8 0xFF9A94BDE38FB778640C9066...  4.2135  3.7% 11538 0.0004  0.00 SELECT playlist
#    9 0x7AB57DAE0FB77B087E0D1340...  3.9537  3.5%     1 3.9537  0.00 DELETE SELECT playlist_favorite playlist
#   10 0xFE201CF788CDAF0ED1351164...  3.8927  3.4% 14693 0.0003  0.00 SELECT user
#   11 0xEF4E32253D50FC6205E21CEE...  3.6344  3.2% 11007 0.0003  0.00 SELECT playlist
#   12 0x1873F8EBA488C72898F5C0BA...  2.5266  2.2%   113 0.0224  0.14 INSERT playlist_song
#   13 0xA254C292FAE6619AA8CCE1B2...  1.6523  1.4%   203 0.0081  0.00 UPDATE user
#   14 0x4D4C3DF814D1DD493C6BE5AA...  1.6094  1.4%   117 0.0138  0.08 INSERT playlist
#   15 0x0A24D4A57D22B71F538F1AE2...  1.5335  1.3%  4419 0.0003  0.00 SELECT song
#   16 0x42BF710EFD325B0747D7D23C...  1.4896  1.3%   194 0.0077  0.00 INSERT sessions_golang
#   17 0x3B4267C2E0B52599C84C7795...  1.2012  1.1%   403 0.0030  0.00 SELECT playlist user
# MISC 0xMISC                         5.0224  4.4%  6797 0.0007   0.0 <23 ITEMS>

# Query 1: 1.53k QPS, 0.80x concurrency, ID 0xEC063962A0903583D4BF22B4F6620A35 at byte 63093857
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         25   51976
# Exec time     23     27s    65us    63ms   521us     2ms     2ms   119us
# Lock time      3   117ms       0     5ms     2us     1us    36us     1us
# Rows sent      7  50.76k       1       1       1       1       0       1
# Rows examine  44  22.83M       0  14.65k  460.64   1.53k   2.21k    7.70
# Query size    18   3.56M      69      72   71.85   69.19    0.05   69.19
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us  ############
# 100us  ################################################################
#   1ms  #######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist_favorite'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist_favorite`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) AS cnt FROM playlist_favorite where playlist_id = 170624\G

# Query 2: 1.37k QPS, 0.43x concurrency, ID 0x8AFB70E4EF33ECB862815558CB07356A at byte 47091223
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         23   46497
# Exec time     12     14s    66us    33ms   311us   972us   798us   125us
# Lock time      3   120ms       0     7ms     2us     1us    52us     1us
# Rows sent      6  45.41k       1       1       1       1       0       1
# Rows examine   3   1.79M       0      79   40.28   72.65   23.02   40.45
# Query size    15   3.01M      65      68   67.85   65.89    0.05   65.89
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us  ######
# 100us  ################################################################
#   1ms  ###
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist_song'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist_song`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) AS cnt FROM playlist_song where playlist_id = 133265\G

# Query 3: 58.74 QPS, 0.41x concurrency, ID 0x3B7F9C3BFD4303564EFFC05B3903B6C4 at byte 34679261
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0    1997
# Exec time     12     14s     2ms    54ms     7ms    16ms     4ms     5ms
# Lock time      0     5ms       0   784us     2us     1us    25us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     1 299.20k     143     168  153.42  158.58    5.16  151.03
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ###########
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist_favorite'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist_favorite`\G
INSERT INTO playlist_favorite (`playlist_id`, `favorite_user_account`, `created_at`) VALUES (362336, 'protecthighdescribe', '2022-06-06 11:57:31.819996191')\G

# Query 4: 161.24 QPS, 0.22x concurrency, ID 0x0C7853719E9897E59B57F2AB15A3EBE3 at byte 54696452
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.01
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    5482
# Exec time      6      7s   107us    62ms     1ms     5ms     3ms   515us
# Lock time      0    23ms     1us     4ms     4us     2us    64us     1us
# Rows sent     29 213.27k       0      79   39.84   72.65   23.53   40.45
# Rows examine   1 639.81k       0     237  119.51  223.14   70.63  124.25
# Query size     7   1.49M     282     285  284.85  284.79    1.50  284.79
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #######################
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist_song'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist_song`\G
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'song'\G
#    SHOW CREATE TABLE `isucon_listen80`.`song`\G
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'artist'\G
#    SHOW CREATE TABLE `isucon_listen80`.`artist`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT s.ulid `song.ulid`, s.title `song.title`, a.name `artist.name`, s.album `song.album`, s.track_number `song.track_number`, s.is_public `song.is_public` FROM playlist_song ps LEFT JOIN song s ON ps.song_id = s.id LEFT JOIN artist a ON s.artist_id = a.id WHERE playlist_id = 103191\G

# Query 5: 0 QPS, 0x concurrency, ID 0xBB803527F0B05ED37FAF2BBD29AD2CB4 at byte 2356
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2022-06-06T11:57:03
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      6      7s      7s      7s      7s      7s       0      7s
# Lock time      0     8us     8us     8us     8us     8us       0     8us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine  38  19.76M  19.76M  19.76M  19.76M  19.76M       0  19.76M
# Query size     0      76      76      76      76      76       0      76
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s  ################################################################
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist_song'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist_song`\G
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist`\G
DELETE FROM playlist_song WHERE playlist_id NOT IN (SELECT id FROM playlist)\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select * from  playlist_song WHERE playlist_id NOT IN (SELECT id FROM playlist)\G

# Query 6: 917.12 QPS, 0.21x concurrency, ID 0xD3D79AC2E339745D16FD77E13E6AC90F at byte 60133067
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count         15   31182
# Exec time      6      7s    49us    29ms   228us   690us   591us    98us
# Lock time      2    80ms       0     7ms     2us     1us    60us     1us
# Rows sent      4  30.45k       1       1       1       1       0       1
# Rows examine   0   8.74k       0       1    0.29    0.99    0.45       0
# Query size    18   3.52M     103     134  118.37  124.25    6.04  118.34
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###############################################################
# 100us  ################################################################
#   1ms  ####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist_favorite'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist_favorite`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT COUNT(*) AS cnt FROM playlist_favorite where favorite_user_account = 'stateeducationalthough' AND playlist_id = 230017\G

# Query 7: 412.82 QPS, 0.18x concurrency, ID 0x40BA718A3112C61FB0C217930D97E29F at byte 46923208
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          6   14036
# Exec time      5      6s   108us    26ms   437us     1ms   924us   185us
# Lock time      1    49ms       0    10ms     3us     1us    95us     1us
# Rows sent      1  13.71k       1       1       1       1       0       1
# Rows examine   1 591.81k       0      79   43.18   72.65   22.53   44.60
# Query size    20   3.82M     282     286  285.71  284.79       2  284.79
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ################################################################
#   1ms  #####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist`\G
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'user'\G
#    SHOW CREATE TABLE `isucon_listen80`.`user`\G
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist_song'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist_song`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT p.*, u.display_name AS 'user.display_name', u.account AS `user.account`, u.is_ban AS `user.is_ban`, COUNT(ps.playlist_id) AS song_count FROM playlist AS p LEFT JOIN user AS u ON p.user_account = u.account LEFT JOIN playlist_song AS ps ON p.id = ps.playlist_id WHERE `id` = 101555\G

# Query 8: 339.35 QPS, 0.12x concurrency, ID 0xFF9A94BDE38FB778640C90666343546B at byte 54692601
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   11538
# Exec time      3      4s    56us    33ms   365us     1ms     1ms   103us
# Lock time      0    24ms       0     2ms     2us     1us    27us     1us
# Rows sent      1  11.27k       1       1       1       1       0       1
# Rows examine   0  11.27k       1       1       1       1       0       1
# Query size     2 469.63k      38      42   41.68   40.45    0.43   40.45
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us  ######################################################
# 100us  ################################################################
#   1ms  #######
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM playlist WHERE `id` = 245575\G

# Query 9: 0 QPS, 0x concurrency, ID 0x7AB57DAE0FB77B087E0D1340C39A97AD at byte 2662
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: all events occurred at 2022-06-06T11:57:07
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0       1
# Exec time      3      4s      4s      4s      4s      4s       0      4s
# Lock time      0     9us     9us     9us     9us     9us       0     9us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   5   2.75M   2.75M   2.75M   2.75M   2.75M       0   2.75M
# Query size     0     122     122     122     122     122       0     122
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms
#  10ms
# 100ms
#    1s  ################################################################
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist_favorite'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist_favorite`\G
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist`\G
DELETE FROM playlist_favorite WHERE playlist_id NOT IN (SELECT id FROM playlist) OR '2022-05-13 09:00:00.000' < created_at\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select * from  playlist_favorite WHERE playlist_id NOT IN (SELECT id FROM playlist) OR '2022-05-13 09:00:00.000' < created_at\G

# Query 10: 432.15 QPS, 0.11x concurrency, ID 0xFE201CF788CDAF0ED13511641E92D414 at byte 47084366
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          7   14693
# Exec time      3      4s    56us    24ms   264us   761us   773us   103us
# Lock time      0    32ms       0     2ms     2us     1us    27us     1us
# Rows sent      1  14.35k       1       1       1       1       0       1
# Rows examine   0  14.35k       1       1       1       1       0       1
# Query size     4 796.50k      46      71   55.51   59.77    3.78   54.21
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us  ###################################################
# 100us  ################################################################
#   1ms  ####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'user'\G
#    SHOW CREATE TABLE `isucon_listen80`.`user`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM user where `account` = 'officerveryme'\G

# Query 11: 323.74 QPS, 0.11x concurrency, ID 0xEF4E32253D50FC6205E21CEE5B40F6F1 at byte 54694992
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          5   11007
# Exec time      3      4s    81us    21ms   330us   972us   789us   144us
# Lock time      0    25ms       0     2ms     2us     1us    30us     1us
# Rows sent      1  10.75k       0       1    1.00    0.99    0.01    0.99
# Rows examine   0  10.75k       0       1    1.00    0.99    0.01    0.99
# Query size     3 709.44k      66      66      66      66       0      66
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ###
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM playlist WHERE `ulid` = '01G4WE0T3ABQAYHMECZXKXM8DB'\G

# Query 12: 3.32 QPS, 0.07x concurrency, ID 0x1873F8EBA488C72898F5C0BA9B7042C5 at byte 57267542
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.14
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     113
# Exec time      2      3s    82us   477ms    22ms   105ms    56ms     2ms
# Lock time     66      2s       0   474ms    20ms   100ms    56ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  97.75k      93   1.64k  885.79   1.53k  477.23  918.49
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ###########################################
#  10ms  #########################
# 100ms  ##########
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist_song'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist_song`\G
INSERT INTO playlist_song (`playlist_id`, `sort_order`, `song_id`) VALUES (362375, 1, 604721),(362375, 2, 598394),(362375, 3, 606766),(362375, 4, 623558),(362375, 5, 613046),(362375, 6, 620563),(362375, 7, 597008),(362375, 8, 615122),(362375, 9, 614696),(362375, 10, 617499),(362375, 11, 600578),(362375, 12, 599106),(362375, 13, 593808),(362375, 14, 617144),(362375, 15, 601873),(362375, 16, 591850),(362375, 17, 616709),(362375, 18, 594536),(362375, 19, 622226),(362375, 20, 604419),(362375, 21, 590450),(362375, 22, 611443),(362375, 23, 605063),(362375, 24, 610098),(362375, 25, 598530),(362375, 26, 607841),(362375, 27, 592868),(362375, 28, 617625),(362375, 29, 605273),(362375, 30, 605717),(362375, 31, 593599),(362375, 32, 617450),(362375, 33, 624020),(362375, 34, 613775),(362375, 35, 618563),(362375, 36, 596309),(362375, 37, 609736),(362375, 38, 593675),(362375, 39, 604713),(362375, 40, 600426),(362375, 41, 605941),(362375, 42, 603596),(362375, 43, 618902),(362375, 44, 615843),(362375, 45, 591698),(362375, 46, 595981),(362375, 47, 617802),(362375, 48, 593427),(362375, 49, 620005),(362375, 50, 596315),(362375, 51, 618586),(362375, 52, 603516),(362375, 53, 594012),(362375, 54, 612452),(362375, 55, 592674),(362375, 56, 606976),(362375, 57, 603980),(362375, 58, 613038),(362375, 59, 614417),(362375, 60, 610443),(362375, 61, 605845),(362375, 62, 600649),(362375, 63, 615253),(362375, 64, 623490),(362375, 65, 617287),(362375, 66, 598207),(362375, 67, 620909),(362375, 68, 614954),(362375, 69, 595010),(362375, 70, 592423),(362375, 71, 599297)\G

# Query 13: 5.97 QPS, 0.05x concurrency, ID 0xA254C292FAE6619AA8CCE1B27E2380C8 at byte 62948810
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     203
# Exec time      1      2s     3ms    29ms     8ms    16ms     5ms     7ms
# Lock time      0   695us       0   443us     3us     1us    29us     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0     203       1       1       1       1       0       1
# Query size     0  19.97k      92     115  100.75  102.22    4.15   97.36
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  #########################
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'user'\G
#    SHOW CREATE TABLE `isucon_listen80`.`user`\G
UPDATE user SET last_logined_at = '2022-06-06 11:57:42.576644229' WHERE account = 'goalprojectform'\G
# Converted for EXPLAIN
# EXPLAIN /*!50100 PARTITIONS*/
select  last_logined_at = '2022-06-06 11:57:42.576644229' from user where  account = 'goalprojectform'\G

# Query 14: 3.44 QPS, 0.05x concurrency, ID 0x4D4C3DF814D1DD493C6BE5AA7BA8C3F7 at byte 57332097
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.08
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     117
# Exec time      1      2s     4ms   362ms    14ms    30ms    34ms     7ms
# Lock time     19   672ms       0   349ms     6ms    20ms    33ms     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  28.43k     229     282  248.84  258.32    9.95  246.02
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ###########################
# 100ms  #
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist`\G
INSERT INTO playlist (`ulid`, `name`, `user_account`, `is_public`, `created_at`, `updated_at`) VALUES ('01G4WE1E53Y02AADZ3AZBJ7F9B', 'ステルスチューリップ屋', 'aroundpositiveactually', 0, '2022-06-06 11:57:40.387051144', '2022-06-06 11:57:40.387051144')\G

# Query 15: 129.97 QPS, 0.05x concurrency, ID 0x0A24D4A57D22B71F538F1AE200CFCE54 at byte 62920133
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          2    4419
# Exec time      1      2s    79us    25ms   347us     1ms   934us   125us
# Lock time      0     6ms       0   421us     1us     1us     9us     1us
# Rows sent      0   4.32k       1       1       1       1       0       1
# Rows examine   0   4.32k       1       1       1       1       0       1
# Query size     1 267.56k      62      62      62      62       0      62
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us  #
# 100us  ################################################################
#   1ms  ####
#  10ms  #
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'song'\G
#    SHOW CREATE TABLE `isucon_listen80`.`song`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT * FROM song WHERE `ulid` = '01G2Y874WG7ZYA8P80CDPVQFXD'\G

# Query 16: 5.71 QPS, 0.04x concurrency, ID 0x42BF710EFD325B0747D7D23CC977A917 at byte 62905960
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     194
# Exec time      1      1s     2ms    48ms     8ms    19ms     6ms     6ms
# Lock time      0   271us     1us    12us     1us     1us       0     1us
# Rows sent      0       0       0       0       0       0       0       0
# Rows examine   0       0       0       0       0       0       0       0
# Query size     0  72.88k     296     417  384.67  400.73   22.28  381.65
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us
#   1ms  ################################################################
#  10ms  ############
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'sessions_golang'\G
#    SHOW CREATE TABLE `isucon_listen80`.`sessions_golang`\G
INSERT INTO `sessions_golang`(id, session_data, created_on, modified_on, expires_on) VALUES (NULL, 'MTY1NDUxNjY2MnxEdi1CQkFFQ180SUFBUkFCRUFBQU5mLUNBQUVHYzNSeWFXNW5EQTRBREhWelpYSmZZV05qYjNWdWRBWnpkSEpwYm1jTUVRQVBkR2hsY0dGeWRIbHBibU5zZFdSbHyk7L7NY-waO2dOqeuZipTe1yr4y9bgzW0bg8CbT8jBvA==', '2022-06-06 11:57:42.536663136', '2022-06-06 11:57:42.536663136', '2022-06-07 11:57:42.536663255')\G

# Query 17: 11.85 QPS, 0.04x concurrency, ID 0x3B4267C2E0B52599C84C77950B3BD9BF at byte 7309994
# This item is included in the report because it matches --limit.
# Scores: V/M = 0.00
# Time range: 2022-06-06T11:57:09 to 2022-06-06T11:57:43
# Attribute    pct   total     min     max     avg     95%  stddev  median
# ============ === ======= ======= ======= ======= ======= ======= =======
# Count          0     403
# Exec time      1      1s   657us    32ms     3ms     9ms     4ms     2ms
# Lock time      0   709us     1us    60us     1us     1us     3us     1us
# Rows sent      5  39.36k     100     100     100     100       0     100
# Rows examine   0  81.73k     206     214  207.67  202.40    0.50  202.40
# Query size     0 146.40k     372     372     372     372       0     372
# String:
# Databases    isucon_listen80
# Hosts        webapp-app-1.webapp_default
# Users        isucon
# Query_time distribution
#   1us
#  10us
# 100us  ######
#   1ms  ################################################################
#  10ms  ##
# 100ms
#    1s
#  10s+
# Tables
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'playlist'\G
#    SHOW CREATE TABLE `isucon_listen80`.`playlist`\G
#    SHOW TABLE STATUS FROM `isucon_listen80` LIKE 'user'\G
#    SHOW CREATE TABLE `isucon_listen80`.`user`\G
# EXPLAIN /*!50100 PARTITIONS*/
SELECT p.*, u.account AS 'user.account', u.display_name AS 'user.display_name', u.password_hash AS 'user.password_hash', u.is_ban AS 'user.is_ban', u.created_at AS 'user.created_at', u.last_logined_at AS 'user.last_logined_at' FROM playlist as p INNER JOIN user as u on p.user_account = u.account where p.is_public = 1 and u.is_ban = 0 ORDER BY p.created_at DESC LIMIT 100\G
